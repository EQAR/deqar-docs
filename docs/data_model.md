Data Model Entities
-------------------
EQAR’s data model has been designed around four main entities: registered quality assurance **Agencies**, higher education **Institutions**, educational **Programmes** associated with institutions, and external quality assurance **Reports**. 

While institutional information will largely be managed by EQAR based on data from ETER/OrgReg, agencies are invited to submit information on external quality assurance reports and the associated results or decisions, with information about the study programme concerned where applicable. Further information on the type of information to be collected and stored in DEQAR can be found in the [Operational Model](https://eqar.eu/fileadmin/eqar_internal/MD/MD6/Database_of_External_QA_Results_Report_Model_v3.pdf), section 5.3, page 36.

The following graph shows the relationship between these entities:

(img/DEQARPhysicalERDiagram_Design31_20-01-18_highlevel.jpg)


DEQAR has also included a **Country** entity, which contains information on the official external quality assurance regime in each DEQAR-related country--a country which either hosts an EQAR-registered agency or hosts an institution evaluated by a EQAR-registered agency.


Creation vs Update - the role of local identifers and standards
---------------------------------------------------------------

Entities are identifed in the following ways:

### Agency

Due to authentication during the ingest/update procedure, the source
agency is identifed transparently by the system. However, an agency may serve as a proxy for another agency, submitting and managing data on its behalf (as in case of umbrella organizations). In this case, the agency’s unique acronym will likely be the source of identifcation.

### Institution

DEQAR will be in sync with the ETER register, so the frst line of identifcation
will be the ETER ID. If an ETER ID is available, no further data on the
institution is required.

>For institutions not in ETER but already in the DEQAR, an internal DEQAR ID can
>be used.

If there is no ETER ID, DEQAR ID or the identifer does not produce a match, the
website address of the institution will be used as a second line of
identifcation and will be matched against the ETER list and data on already
submitted institutions. This failing, the name of the institution in English or
original language will be used. If the process produces no match with the ETER
list or with existing HEI data, then the record will be fagged for checking by
the EQAR secretariat. (If a record lacks an ETER ID, but a match is found among
the ETER registered institutions, then the ETER ID can be included in the
response.)

### Programme

DEQAR will not sync data on programmes; however if a local or national identifer
is provided, this will be saved and can serve as a primary identifer if further
reports are submitted for the same programme later.

### Report

Each report will receive an identifer generated by the DEQAR system. If an
agency uses a local identifer for its reports, then this will be saved and can
serve as the primary identifer for the purpose of resubmission.

DEQAR highly recommends the submission of local identifers for each submitted
entity. These may come in handy when data must be updated via any of the batch
interfaces.


When aggregating large amounts of data from different sources, the biggest challenges are

1. to keep the same data from different sources in sync (ex., the same institution may be described slightly differently by different agencies),
2. to try to avoid duplication and
3. to identify already existing records for update if necessary.

To achieve this, DEQAR data model uses standard values on various levels.
Countries are identifed via the ISO 3166-1 standard; language data is accepted
in ISO 639-1 or ISO 639-2/B format.

Use of Data from ETER/OrgReg
----------------------------

Historical Data
---------------

In the case of Agencies and Institutions, the system should record important
changes in the status of these entities (ex. name changes, changed activity or
status, physical relocation, etc.). Thus it is necessary to differentiate
between updates in data due to typographical or syntax errors, and
“substantial” updates, which will becomemight be considered as part of
an historic data trail. On web forms and on the submission API endpoints there
will be a possibility to indicate a change request. In this case, the
overwritten data will be stored as historical data (and can be queried). It
remains unclear whether the bulk ingest and CSV upload can support this feature;
it is under discussion.
